{"version":3,"names":[],"sources":["src/PNotifyMobileComponent.html"],"sourcesContent":["<script context=\"module\">\n  import PNotify from './PNotifyCore';\n  export const key = 'Mobile';\n\n  export const defaults = {\n    // Let the user swipe the notice away.\n    swipeDismiss: true,\n    // Styles the notice to look good on mobile.\n    styling: true\n  };\n</script>\n<svelte:window on:resize={windowResize} />\n<script>\n  // The PNotify notice.\n  export let self = null;\n\n  export let swipeDismiss = defaults.swipeDismiss;\n  export let styling = defaults.styling;\n\n  let origXY = null;\n  let diffXY = null;\n  let noticeWidthHeight = null;\n  let noticeOpacity = null;\n  let csspos = 'left';\n  let direction = 'X';\n  let span = 'Width';\n  let windowInnerWidth = window.innerWidth;\n\n  $: {\n    const stack = self.stack;\n\n    if (styling && !self.hasModuleClass('elem', 'ui-pnotify-mobile-able')) {\n      if (stack) {\n        if (windowInnerWidth <= 480) {\n          if (!stack.mobileOrigSpacing1) {\n            stack.mobileOrigSpacing1 = stack.spacing1;\n          }\n          stack.spacing1 = 0;\n          if (!stack.mobileOrigFirstpos1) {\n            stack.mobileOrigFirstpos1 = stack.firstpos1;\n          }\n          stack.firstpos1 = 0;\n          if (!stack.mobileOrigSpacing2) {\n            stack.mobileOrigSpacing2 = stack.spacing2;\n          }\n          stack.spacing2 = 0;\n          if (!stack.mobileOrigFirstpos2) {\n            stack.mobileOrigFirstpos2 = stack.firstpos2;\n          }\n          stack.firstpos2 = 0;\n        } else {\n          if (stack.mobileOrigSpacing1) {\n            stack.spacing1 = stack.mobileOrigSpacing1;\n            delete stack.mobileOrigSpacing1;\n          }\n          if (stack.mobileOrigFirstpos1) {\n            stack.firstpos1 = stack.mobileOrigFirstpos1;\n            delete stack.mobileOrigFirstpos1;\n          }\n          if (stack.mobileOrigSpacing2) {\n            stack.spacing2 = stack.mobileOrigSpacing2;\n            delete stack.mobileOrigSpacing2;\n          }\n          if (stack.mobileOrigFirstpos2) {\n            stack.firstpos2 = stack.mobileOrigFirstpos2;\n            delete stack.mobileOrigFirstpos2;\n          }\n        }\n        self.removeModuleClass(\n          'elem',\n          'ui-pnotify-mobile-top',\n          'ui-pnotify-mobile-bottom',\n          'ui-pnotify-mobile-right',\n          'ui-pnotify-mobile-left'\n        );\n        switch (stack.dir1) {\n          case 'down':\n            self.addModuleClass('elem', 'ui-pnotify-mobile-top');\n            break;\n          case 'up':\n            self.addModuleClass('elem', 'ui-pnotify-mobile-bottom');\n            break;\n          case 'left':\n            self.addModuleClass('elem', 'ui-pnotify-mobile-right');\n            break;\n          case 'right':\n            self.addModuleClass('elem', 'ui-pnotify-mobile-left');\n            break;\n        }\n      }\n\n      self.addModuleClass('elem', 'ui-pnotify-mobile-able');\n    } else if (!styling && self.hasModuleClass('elem', 'ui-pnotify-mobile-able')) {\n      self.removeModuleClass(\n        'elem',\n        'ui-pnotify-mobile-able',\n        'ui-pnotify-mobile-top',\n        'ui-pnotify-mobile-bottom',\n        'ui-pnotify-mobile-right',\n        'ui-pnotify-mobile-left'\n      );\n\n      if (stack) {\n        if (stack.mobileOrigSpacing1) {\n          stack.spacing1 = stack.mobileOrigSpacing1;\n          delete stack.mobileOrigSpacing1;\n        }\n        if (stack.mobileOrigFirstpos1) {\n          stack.firstpos1 = stack.mobileOrigFirstpos1;\n          delete stack.mobileOrigFirstpos1;\n        }\n        if (stack.mobileOrigSpacing2) {\n          stack.spacing2 = stack.mobileOrigSpacing2;\n          delete stack.mobileOrigSpacing2;\n        }\n        if (stack.mobileOrigFirstpos2) {\n          stack.firstpos2 = stack.mobileOrigFirstpos2;\n          delete stack.mobileOrigFirstpos2;\n        }\n      }\n    }\n  }\n\n  self.on('touchstart', e => {\n    if (!swipeDismiss) {\n      return;\n    }\n\n    const stack = self.stack;\n    if (stack) {\n      switch (stack.dir1) {\n        case 'up':\n        case 'down':\n          csspos = 'left';\n          direction = 'X';\n          span = 'Width';\n          break;\n        case 'left':\n        case 'right':\n          csspos = 'top';\n          direction = 'Y';\n          span = 'Height';\n          break;\n      }\n    }\n\n    origXY = e.touches[0]['screen' + direction];\n    noticeWidthHeight = self.refs.elem['scroll' + span];\n    noticeOpacity = window.getComputedStyle(self.refs.elem)['opacity'];\n    self.refs.container.style[csspos] = 0;\n  });\n\n  self.on('touchmove', e => {\n    if (!origXY || !swipeDismiss) {\n      return;\n    }\n\n    const curXY = e.touches[0]['screen' + direction];\n\n    diffXY = curXY - origXY;\n    const opacity = (1 - (Math.abs(diffXY) / noticeWidthHeight)) * noticeOpacity;\n\n    self.refs.elem.style.opacity = opacity;\n    self.refs.container.style[csspos] = diffXY + 'px';\n  });\n\n  self.on('touchend', () => {\n    if (!origXY || !swipeDismiss) {\n      return;\n    }\n\n    self.refs.container.classList.add('ui-pnotify-mobile-animate-left');\n    if (Math.abs(diffXY) > 40) {\n      const goLeft = (diffXY < 0) ? noticeWidthHeight * -2 : noticeWidthHeight * 2;\n      self.refs.elem.style.opacity = 0;\n      self.refs.container.style[csspos] = goLeft + 'px';\n      self.close();\n    } else {\n      self.refs.elem.style.removeProperty('opacity');\n      self.refs.container.style.removeProperty(csspos);\n    }\n    origXY = null;\n    diffXY = null;\n    noticeWidthHeight = null;\n    noticeOpacity = null;\n  });\n\n  self.on('touchcancel', () => {\n    if (!origXY || !swipeDismiss) {\n      return;\n    }\n\n    self.refs.elem.style.removeProperty('opacity');\n    self.refs.container.style.removeProperty(csspos);\n    origXY = null;\n    diffXY = null;\n    noticeWidthHeight = null;\n    noticeOpacity = null;\n  });\n\n  self.on('pnotify:afterClose', () => {\n    // Remove any styling we added to close it.\n    if (!swipeDismiss) {\n      return;\n    }\n\n    self.refs.elem.style.removeProperty('opacity');\n    self.refs.container.style.removeProperty('left');\n    self.refs.container.style.removeProperty('top');\n  });\n\n  function windowResize () {\n    windowInnerWidth = window.innerWidth;\n  }\n</script>\n<style>\n  :global([ui-pnotify] .ui-pnotify-container) {\n    position: relative;\n  }\n  :global([ui-pnotify] .ui-pnotify-mobile-animate-left) {\n    transition: left .1s ease;\n  }\n  :global([ui-pnotify] .ui-pnotify-mobile-animate-top) {\n    transition: top .1s ease;\n  }\n  @media (max-width: 480px) {\n    /* -- Notice */\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able) {\n      font-size: 1.2em;\n      -webkit-font-smoothing: antialiased;\n      -moz-font-smoothing: antialiased;\n      -ms-font-smoothing: antialiased;\n      font-smoothing: antialiased;\n    }\n    :global(body > [ui-pnotify].ui-pnotify.ui-pnotify-mobile-able) {\n      position: fixed;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-top),\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-bottom) {\n      width: 100% !important;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-left),\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-right) {\n      height: 100% !important;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able .ui-pnotify-shadow) {\n      -webkit-box-shadow: none;\n      -moz-box-shadow: none;\n      box-shadow: none;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-top .ui-pnotify-shadow) {\n      border-bottom-width: 5px;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-bottom .ui-pnotify-shadow) {\n      border-top-width: 5px;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-left .ui-pnotify-shadow) {\n      border-right-width: 5px;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-right .ui-pnotify-shadow) {\n      border-left-width: 5px;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able .ui-pnotify-container) {\n      -webkit-border-radius: 0;\n      -moz-border-radius: 0;\n      border-radius: 0;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-top .ui-pnotify-container),\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-bottom .ui-pnotify-container) {\n      width: auto !important;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-left .ui-pnotify-container),\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-right .ui-pnotify-container) {\n      height: 100% !important;\n    }\n  }\n</style>\n"],"mappings":"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"}