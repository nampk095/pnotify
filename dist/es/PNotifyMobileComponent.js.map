{"version":3,"names":[],"sources":["src/PNotifyMobileComponent.html"],"sourcesContent":["<script context=\"module\">\n  import PNotify from './PNotifyCore';\n  export const key = 'Mobile';\n\n  export const defaults = {\n    // Let the user swipe the notice away.\n    swipeDismiss: true,\n    // Styles the notice to look good on mobile.\n    styling: true\n  };\n</script>\n\n<svelte:window on:resize={windowResize} />\n\n<script>\n  // The PNotify notice.\n  export let _notice = null;\n\n  export let swipeDismiss = defaults.swipeDismiss;\n  export let styling = defaults.styling;\n\n  let windowInnerWidth = window.innerWidth;\n\n  $: {\n    const stack = _notice.stack;\n\n    if (styling && !_notice.hasModuleClass('elem', 'ui-pnotify-mobile-able')) {\n      if (stack) {\n        if (windowInnerWidth <= 480) {\n          if (!stack.mobileOrigSpacing1) {\n            stack.mobileOrigSpacing1 = stack.spacing1;\n          }\n          stack.spacing1 = 0;\n          if (!stack.mobileOrigFirstpos1) {\n            stack.mobileOrigFirstpos1 = stack.firstpos1;\n          }\n          stack.firstpos1 = 0;\n          if (!stack.mobileOrigSpacing2) {\n            stack.mobileOrigSpacing2 = stack.spacing2;\n          }\n          stack.spacing2 = 0;\n          if (!stack.mobileOrigFirstpos2) {\n            stack.mobileOrigFirstpos2 = stack.firstpos2;\n          }\n          stack.firstpos2 = 0;\n        } else {\n          if (stack.mobileOrigSpacing1) {\n            stack.spacing1 = stack.mobileOrigSpacing1;\n            delete stack.mobileOrigSpacing1;\n          }\n          if (stack.mobileOrigFirstpos1) {\n            stack.firstpos1 = stack.mobileOrigFirstpos1;\n            delete stack.mobileOrigFirstpos1;\n          }\n          if (stack.mobileOrigSpacing2) {\n            stack.spacing2 = stack.mobileOrigSpacing2;\n            delete stack.mobileOrigSpacing2;\n          }\n          if (stack.mobileOrigFirstpos2) {\n            stack.firstpos2 = stack.mobileOrigFirstpos2;\n            delete stack.mobileOrigFirstpos2;\n          }\n        }\n        _notice.removeModuleClass(\n          'elem',\n          'ui-pnotify-mobile-top',\n          'ui-pnotify-mobile-bottom',\n          'ui-pnotify-mobile-right',\n          'ui-pnotify-mobile-left'\n        );\n        switch (stack.dir1) {\n          case 'down':\n            _notice.addModuleClass('elem', 'ui-pnotify-mobile-top');\n            break;\n          case 'up':\n            _notice.addModuleClass('elem', 'ui-pnotify-mobile-bottom');\n            break;\n          case 'left':\n            _notice.addModuleClass('elem', 'ui-pnotify-mobile-right');\n            break;\n          case 'right':\n            _notice.addModuleClass('elem', 'ui-pnotify-mobile-left');\n            break;\n        }\n      }\n\n      _notice.addModuleClass('elem', 'ui-pnotify-mobile-able');\n    } else if (!styling && _notice.hasModuleClass('elem', 'ui-pnotify-mobile-able')) {\n      _notice.removeModuleClass(\n        'elem',\n        'ui-pnotify-mobile-able',\n        'ui-pnotify-mobile-top',\n        'ui-pnotify-mobile-bottom',\n        'ui-pnotify-mobile-right',\n        'ui-pnotify-mobile-left'\n      );\n\n      if (stack) {\n        if (stack.mobileOrigSpacing1) {\n          stack.spacing1 = stack.mobileOrigSpacing1;\n          delete stack.mobileOrigSpacing1;\n        }\n        if (stack.mobileOrigFirstpos1) {\n          stack.firstpos1 = stack.mobileOrigFirstpos1;\n          delete stack.mobileOrigFirstpos1;\n        }\n        if (stack.mobileOrigSpacing2) {\n          stack.spacing2 = stack.mobileOrigSpacing2;\n          delete stack.mobileOrigSpacing2;\n        }\n        if (stack.mobileOrigFirstpos2) {\n          stack.firstpos2 = stack.mobileOrigFirstpos2;\n          delete stack.mobileOrigFirstpos2;\n        }\n      }\n    }\n  }\n\n  function windowResize () {\n    windowInnerWidth = window.innerWidth;\n  }\n\n  export function init () {\n    let origXY = null;\n    let diffXY = null;\n    let noticeWidthHeight = null;\n    let noticeOpacity = null;\n    let csspos = 'left';\n    let direction = 'X';\n    let span = 'Width';\n\n    _notice.on('touchstart', e => {\n      if (!swipeDismiss) {\n        return;\n      }\n\n      const stack = _notice.stack;\n      if (stack) {\n        switch (stack.dir1) {\n          case 'up':\n          case 'down':\n            csspos = 'left';\n            direction = 'X';\n            span = 'Width';\n            break;\n          case 'left':\n          case 'right':\n            csspos = 'top';\n            direction = 'Y';\n            span = 'Height';\n            break;\n        }\n      }\n\n      origXY = e.touches[0]['screen' + direction];\n      noticeWidthHeight = _notice.refs.elem['scroll' + span];\n      noticeOpacity = window.getComputedStyle(_notice.refs.elem)['opacity'];\n      _notice.refs.container.style[csspos] = 0;\n    });\n\n    _notice.on('touchmove', e => {\n      if (!origXY || !swipeDismiss) {\n        return;\n      }\n\n      const curXY = e.touches[0]['screen' + direction];\n\n      diffXY = curXY - origXY;\n      const opacity = (1 - (Math.abs(diffXY) / noticeWidthHeight)) * noticeOpacity;\n\n      _notice.refs.elem.style.opacity = opacity;\n      _notice.refs.container.style[csspos] = diffXY + 'px';\n    });\n\n    _notice.on('touchend', () => {\n      if (!origXY || !swipeDismiss) {\n        return;\n      }\n\n      _notice.refs.container.classList.add('ui-pnotify-mobile-animate-left');\n      if (Math.abs(diffXY) > 40) {\n        const goLeft = (diffXY < 0) ? noticeWidthHeight * -2 : noticeWidthHeight * 2;\n        _notice.refs.elem.style.opacity = 0;\n        _notice.refs.container.style[csspos] = goLeft + 'px';\n        _notice.close();\n      } else {\n        _notice.refs.elem.style.removeProperty('opacity');\n        _notice.refs.container.style.removeProperty(csspos);\n      }\n      origXY = null;\n      diffXY = null;\n      noticeWidthHeight = null;\n      noticeOpacity = null;\n    });\n\n    _notice.on('touchcancel', () => {\n      if (!origXY || !swipeDismiss) {\n        return;\n      }\n\n      _notice.refs.elem.style.removeProperty('opacity');\n      _notice.refs.container.style.removeProperty(csspos);\n      origXY = null;\n      diffXY = null;\n      noticeWidthHeight = null;\n      noticeOpacity = null;\n    });\n  }\n\n  export function afterClose () {\n    // Remove any styling we added to close it.\n    if (!swipeDismiss) {\n      return;\n    }\n\n    _notice.refs.elem.style.removeProperty('opacity');\n    _notice.refs.container.style.removeProperty('left');\n    _notice.refs.container.style.removeProperty('top');\n  }\n</script>\n<style>\n  :global([ui-pnotify] .ui-pnotify-container) {\n    position: relative;\n  }\n  :global([ui-pnotify] .ui-pnotify-mobile-animate-left) {\n    transition: left .1s ease;\n  }\n  :global([ui-pnotify] .ui-pnotify-mobile-animate-top) {\n    transition: top .1s ease;\n  }\n  @media (max-width: 480px) {\n    /* -- Notice */\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able) {\n      font-size: 1.2em;\n      -webkit-font-smoothing: antialiased;\n      -moz-font-smoothing: antialiased;\n      -ms-font-smoothing: antialiased;\n      font-smoothing: antialiased;\n    }\n    :global(body > [ui-pnotify].ui-pnotify.ui-pnotify-mobile-able) {\n      position: fixed;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-top),\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-bottom) {\n      width: 100% !important;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-left),\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-right) {\n      height: 100% !important;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able .ui-pnotify-shadow) {\n      -webkit-box-shadow: none;\n      -moz-box-shadow: none;\n      box-shadow: none;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-top .ui-pnotify-shadow) {\n      border-bottom-width: 5px;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-bottom .ui-pnotify-shadow) {\n      border-top-width: 5px;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-left .ui-pnotify-shadow) {\n      border-right-width: 5px;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-right .ui-pnotify-shadow) {\n      border-left-width: 5px;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able .ui-pnotify-container) {\n      -webkit-border-radius: 0;\n      -moz-border-radius: 0;\n      border-radius: 0;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-top .ui-pnotify-container),\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-bottom .ui-pnotify-container) {\n      width: auto !important;\n    }\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-left .ui-pnotify-container),\n    :global([ui-pnotify].ui-pnotify.ui-pnotify-mobile-able.ui-pnotify-mobile-right .ui-pnotify-container) {\n      height: 100% !important;\n    }\n  }\n</style>\n"],"mappings":"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"}