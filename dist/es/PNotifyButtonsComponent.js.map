{"version":3,"names":[],"sources":["src/PNotifyButtonsComponent.html"],"sourcesContent":["<script context=\"module\">\n  import { icons } from './PNotifyCore';\n\n  export const key = 'Buttons';\n\n  export const defaults = {\n    // Provide a button for the user to manually close the notice.\n    closer: true,\n    // Only show the closer button on hover.\n    closerHover: true,\n    // Provide a button for the user to manually stick the notice.\n    sticker: true,\n    // Only show the sticker button on hover.\n    stickerHover: true,\n    // The various displayed text, helps facilitating internationalization.\n    labels: {\n      close: 'Close',\n      stick: 'Stick',\n      unstick: 'Unstick'\n    },\n    // The classes to use for button icons. Leave them null to use the classes from the styling you're using.\n    classes: {\n      closer: null,\n      sticker: null,\n      stuck: null,\n      unstuck: null\n    }\n  };\n\n  // Add button icons to icons objects.\n  Object.assign(icons.bootstrap3, {\n    closer: 'glyphicon glyphicon-remove',\n    sticker: 'glyphicon',\n    stuck: 'glyphicon-play',\n    unstuck: 'glyphicon-pause'\n  });\n  Object.assign(icons.fontawesome4, {\n    closer: 'fa fa-times',\n    sticker: 'fa',\n    stuck: 'fa-play',\n    unstuck: 'fa-pause'\n  });\n  Object.assign(icons.fontawesome5, {\n    closer: 'fas fa-times',\n    sticker: 'fas',\n    stuck: 'fa-play',\n    unstuck: 'fa-pause'\n  });\n</script>\n\n{#if closer && !(_notice && _notice.refs.elem.classList.contains('nonblock'))}\n  <div\n      class=\"ui-pnotify-closer {_notice.getStyle('closer')} {(!closerHover || mouseIsIn) ? '' : 'ui-pnotify-buttons-hidden'}\"\n      role=\"button\"\n      tabindex=\"0\"\n      title={labels.close}\n      on:click={handleCloserClick}>\n    <span class={closerClass}></span>\n  </div>\n{/if}\n{#if sticker && !(_notice && _notice.refs.elem.classList.contains('nonblock'))}\n  <div\n      class=\"ui-pnotify-sticker {_notice.getStyle('sticker')} {(!stickerHover || mouseIsIn) ? '' : 'ui-pnotify-buttons-hidden'}\"\n      role=\"button\"\n      aria-pressed={!_notice.hide}\n      tabindex=\"0\"\n      title={_notice.hide ? labels.stick : labels.unstick}\n      on:click={handleStickerClick}>\n    <span class=\"{stickerClass} {_notice.hide ? unstuckClass : stuckClass}\"></span>\n  </div>\n{/if}\n\n<script>\n  import { onMount, onDestroy, beforeUpdate, tick, createEventDispatcher } from 'svelte';\n\n  const dispatch = createEventDispatcher();\n\n  // The PNotify notice.\n  export let _notice = null;\n\n  export let closer = defaults.closer;\n  export let closerHover = defaults.closerHover;\n  export let sticker = defaults.sticker;\n  export let stickerHover = defaults.stickerHover;\n  export let labels = defaults.labels;\n  export let classes = defaults.classes;\n\n  let mouseIsIn = false;\n\n  // This keeps the beforeUpdate handler from going into a loop when we're taming Font Awesome's magic.\n  let updatingIcon = false;\n  // Save the old value of hide and icon, so we can do our magic.\n  let oldIcon;\n\n  // These are button icon classes.\n  $: stickerClass = _notice ? (classes.sticker === null ? _notice.getIcon('sticker') : classes.sticker) : '';\n  $: stuckClass = _notice ? (classes.stuck === null ? _notice.getIcon('stuck') : classes.stuck) : '';\n  $: unstuckClass = _notice ? (classes.unstuck === null ? _notice.getIcon('unstuck') : classes.unstuck) : '';\n  $: closerClass = _notice ? (classes.closer === null ? _notice.getIcon('closer') : classes.closer) : '';\n\n  beforeUpdate(async () => {\n    if (updatingIcon) {\n      console.log('updating...');\n      return;\n    }\n\n    // Font Awesome 5 uses dark magic by replacing the icon element with an SVG.\n    // In order to make it play nice with Svelte, we have to clear the element\n    // and make it again.\n    const icon = _notice.hide ? unstuckClass : stuckClass;\n    if (\n      icon !== oldIcon &&\n      (\n        (_notice.icons === 'fontawesome5') ||\n        (typeof stickerClass === 'string' && stickerClass.match(/(^| )fa[srlb]($| )/)) ||\n        (typeof icon === 'string' && icon.match(/(^| )fa[srlb]($| )/))\n      )\n    ) {\n      sticker = false;\n      updatingIcon = true;\n      await tick();\n      sticker = true;\n      updatingIcon = false;\n      oldIcon = icon;\n    }\n  });\n\n  onMount(() => {\n    dispatch('init', {\n      init\n    });\n  });\n\n  let removeMouseEnterHandler;\n  let removeMouseLeaveHandler;\n\n  onDestroy(() => {\n    removeMouseEnterHandler && removeMouseEnterHandler();\n    removeMouseLeaveHandler && removeMouseLeaveHandler();\n  });\n\n  export function init () {\n    removeMouseEnterHandler = _notice.on('mouseenter', handleMouseEnter);\n    removeMouseLeaveHandler = _notice.on('mouseleave', handleMouseLeave);\n  }\n\n  function handleMouseEnter() {\n    mouseIsIn = true;\n  }\n\n  function handleMouseLeave() {\n    mouseIsIn = false;\n  }\n\n  function handleStickerClick () {\n    _notice.hide = !_notice.hide;\n  }\n\n  function handleCloserClick () {\n    _notice.close(false);\n    mouseIsIn = false;\n  }\n</script>\n\n<style>\n  :global(.ui-pnotify-closer),\n  :global(.ui-pnotify-sticker) {\n    float: right;\n    margin-left: .5em;\n    cursor: pointer;\n  }\n  :global([dir=rtl] .ui-pnotify-closer),\n  :global([dir=rtl] .ui-pnotify-sticker) {\n    float: left;\n    margin-right: .5em;\n    margin-left: 0;\n  }\n  :global(.ui-pnotify-buttons-hidden) {\n    visibility: hidden;\n  }\n</style>\n"],"mappings":"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"}